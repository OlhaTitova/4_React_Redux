{"ast":null,"code":"import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { addToCart } from '../components/utils/cart';\nimport { getProductFavorite } from '../components/utils/favorite'; // const [list, setList] = useState(getProductFavorite());\n// products = products.filter(product => list.find(item => item === product.id));\n// const handleFavoriteList = () => setList(getProductFavorite());\n// ACTIONS\n\nconst GET_PRODUCTS = \"GET_PRODUCTS\";\nconst SHOW_MODAL_ADD_TO_CARD = 'SHOW_MODAL_ADD_TO_CARD';\nconst MODAL_CLOSE = 'MODAL_CLOSE';\nconst FAVORITE_PRODUCT_LIST = 'FAVORITE_PRODUCT_LIST'; // const SHOW_MODAL_DELETE = 'SHOW_MODAL_DELETE'\n// REDUCER\n\nconst initialState = {\n  products: [],\n  modalProductId: null,\n  modalDeleteID: null,\n  favoriteProducts: [],\n  modalDelete: null\n};\n\nfunction reducer(state = initialState, action) {\n  switch (action.type) {\n    case GET_PRODUCTS:\n      return { ...state,\n        products: action.payload\n      };\n\n    case SHOW_MODAL_ADD_TO_CARD:\n      return { ...state,\n        modalProductId: action.payload\n      };\n\n    case MODAL_CLOSE:\n      return { ...state,\n        modalProductId: null\n      };\n\n    case FAVORITE_PRODUCT_LIST:\n      console.log('updated in reducer');\n      return { ...state,\n        favoriteProducts: action.payload\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport const getProducts = payload => ({\n  type: GET_PRODUCTS,\n  payload\n});\nexport const showModalAddToCard = payload => ({\n  type: SHOW_MODAL_ADD_TO_CARD,\n  payload\n});\nexport const modalClose = () => ({\n  type: MODAL_CLOSE\n});\nexport const favoriteProductList = payload => ({\n  type: FAVORITE_PRODUCT_LIST,\n  payload\n}); // MIDDLEWARE\n\nexport const getProductList = () => async dispatch => {\n  const res = await fetch('cardProduct.json');\n  const data = await res.json();\n  dispatch(getProducts(data)); // const favorite = data.filter(product => {\n  //     const items = JSON.parse(localStorage.getItem('favoriteList'))\n  //     return items.find((itemID) => itemID === product.id)\n  // })\n  // console.log(favorite);\n  // dispatch(favoriteProduct(favorite))\n};\nexport const modalConfirmAddToCart = productId => dispatch => {\n  addToCart(productId);\n  dispatch(modalClose());\n};\nexport const getFavoriteList = () => async dispatch => {\n  const res = await fetch('cardProduct.json');\n  const data = await res.json();\n  dispatch(getProducts(data));\n  const favoriteList = getProductFavorite();\n  const favoriteProducts = data.filter(product => favoriteList.find(item => item === product.id));\n  console.log(favoriteProducts);\n  dispatch(favoriteProductList(favoriteProducts));\n};\nexport const toggleFavorite = itemId => dispatch => {\n  const favorite = JSON.parse(localStorage.getItem('favoriteList')) || [];\n\n  if (favorite.indexOf(itemId) > -1) {\n    favorite.splice(favorite.indexOf(itemId), 1);\n  } else {\n    favorite.push(itemId);\n  }\n\n  localStorage.setItem('favoriteList', JSON.stringify(favorite));\n  dispatch(favoriteProductList(favorite));\n};\nconst store = createStore(reducer, applyMiddleware(thunk));\nexport default store;","map":{"version":3,"sources":["/home/vadim/Documents/OLHA/DAN_IT/HomeWork/React/4_React_Redux/src/store/index.js"],"names":["createStore","applyMiddleware","thunk","addToCart","getProductFavorite","GET_PRODUCTS","SHOW_MODAL_ADD_TO_CARD","MODAL_CLOSE","FAVORITE_PRODUCT_LIST","initialState","products","modalProductId","modalDeleteID","favoriteProducts","modalDelete","reducer","state","action","type","payload","console","log","getProducts","showModalAddToCard","modalClose","favoriteProductList","getProductList","dispatch","res","fetch","data","json","modalConfirmAddToCart","productId","getFavoriteList","favoriteList","filter","product","find","item","id","toggleFavorite","itemId","favorite","JSON","parse","localStorage","getItem","indexOf","splice","push","setItem","stringify","store"],"mappings":"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","sourcesContent":["import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { addToCart } from '../components/utils/cart';\nimport { getProductFavorite } from '../components/utils/favorite';\n\n\n\n// const [list, setList] = useState(getProductFavorite());\n\n// products = products.filter(product => list.find(item => item === product.id));\n\n// const handleFavoriteList = () => setList(getProductFavorite());\n\n\n// ACTIONS\n\nconst GET_PRODUCTS = \"GET_PRODUCTS\";\nconst SHOW_MODAL_ADD_TO_CARD = 'SHOW_MODAL_ADD_TO_CARD';\nconst MODAL_CLOSE = 'MODAL_CLOSE';\nconst FAVORITE_PRODUCT_LIST = 'FAVORITE_PRODUCT_LIST';\n// const SHOW_MODAL_DELETE = 'SHOW_MODAL_DELETE'\n\n\n// REDUCER\n\nconst initialState = {\n    products: [],\n    modalProductId: null,\n    modalDeleteID: null,\n    favoriteProducts: [],\n    modalDelete: null,\n}\n\nfunction reducer(state = initialState, action) {\n    switch (action.type) {\n        case GET_PRODUCTS:\n            return {\n                ...state,\n                products: action.payload\n            }\n        case SHOW_MODAL_ADD_TO_CARD:\n            return {\n                ...state,\n                modalProductId: action.payload\n            }\n        case MODAL_CLOSE:\n            return {\n                ...state,\n                modalProductId: null\n            }\n\n        case FAVORITE_PRODUCT_LIST:\n            console.log('updated in reducer');\n            return {\n                ...state,\n                favoriteProducts: action.payload\n            }\n        default:\n            return state\n    }\n}\n\nexport const getProducts = (payload) => ({\n    type: GET_PRODUCTS,\n    payload\n});\n\nexport const showModalAddToCard = (payload) => ({\n    type: SHOW_MODAL_ADD_TO_CARD,\n    payload\n});\n\nexport const modalClose = () => ({\n    type: MODAL_CLOSE\n});\n\nexport const favoriteProductList = (payload) => ({\n    type: FAVORITE_PRODUCT_LIST,\n    payload\n});\n\n// MIDDLEWARE\n\nexport const getProductList = () => async (dispatch) => {\n    const res = await fetch('cardProduct.json');\n    const data = await res.json();\n    dispatch(getProducts(data));\n\n    // const favorite = data.filter(product => {\n    //     const items = JSON.parse(localStorage.getItem('favoriteList'))\n    //     return items.find((itemID) => itemID === product.id)\n    // })\n    // console.log(favorite);\n    // dispatch(favoriteProduct(favorite))\n}\n\nexport const modalConfirmAddToCart = (productId) => (dispatch) => {\n    addToCart(productId)\n    dispatch(modalClose())\n}\n\nexport const getFavoriteList = () => async (dispatch) => {\n    const res = await fetch('cardProduct.json');\n    const data = await res.json();\n    dispatch(getProducts(data));\n\n    const favoriteList = getProductFavorite();\n\n    const favoriteProducts = data.filter(product => favoriteList.find(item => item === product.id))\n\n    console.log(favoriteProducts);\n    dispatch(favoriteProductList(favoriteProducts))\n}\n\nexport const toggleFavorite = (itemId) => (dispatch) => {\n\n    const favorite = JSON.parse(localStorage.getItem('favoriteList')) || [];\n\n    if (favorite.indexOf(itemId) > -1) {\n        favorite.splice(favorite.indexOf(itemId), 1);\n    } else {\n        favorite.push(itemId);\n    }\n\n    localStorage.setItem('favoriteList', JSON.stringify(favorite))\n\n    dispatch(favoriteProductList(favorite))\n}\n\n\nconst store = createStore(reducer, applyMiddleware(thunk));\n\nexport default store;"]},"metadata":{},"sourceType":"module"}