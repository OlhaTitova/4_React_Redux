{"ast":null,"code":"import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { addToCart, getProductWithCart, removeProductCart } from '../utils/cart';\nimport { getProductFavorite } from '../utils/favorite'; // const [list, setList] = useState(getProductFavorite());\n// products = products.filter(product => list.find(item => item === product.id));\n// const handleFavoriteList = () => setList(getProductFavorite());\n// ACTIONS\n\nconst GET_PRODUCTS = \"GET_PRODUCTS\";\nconst SHOW_MODAL_ADD_TO_CART = 'SHOW_MODAL_ADD_TO_CART';\nconst CLOSE_MODAL_ADD = 'CLOSE_MODAL_ADD';\nconst FAVORITE_PRODUCTS = 'FAVORITE_PRODUCTS';\nconst SHOW_MODAL_DELETE = 'SHOW_MODAL_DELETE';\nconst CLOSE_MODAL_DELETE = 'CLOSE_MODAL_DELETE';\nconst CART_PRODUCTS = 'CART_PRODUCTS'; // REDUCER\n\nconst initialState = {\n  products: [],\n  modalProductId: null,\n  modalDeleteId: null,\n  favoriteProducts: [],\n  cartProducts: {},\n  productsCounts: {}\n};\n\nfunction reducer(state = initialState, action) {\n  switch (action.type) {\n    case GET_PRODUCTS:\n      return { ...state,\n        products: action.payload\n      };\n\n    case SHOW_MODAL_ADD_TO_CART:\n      return { ...state,\n        modalProductId: action.payload\n      };\n\n    case CLOSE_MODAL_ADD:\n      return { ...state,\n        modalProductId: null\n      };\n\n    case SHOW_MODAL_DELETE:\n      return { ...state,\n        modalProductId: action.payload\n      };\n\n    case CLOSE_MODAL_DELETE:\n      return { ...state,\n        modalProductId: null\n      };\n\n    case FAVORITE_PRODUCTS:\n      return { ...state,\n        favoriteProducts: state.products.filter(product => action.payload.find(item => item === product.id))\n      };\n\n    case CART_PRODUCTS:\n      return { ...state,\n        cartProducts: state.products.filter(product => action.payload[product.id]),\n        productsCounts: action.payload\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport const getProducts = payload => ({\n  type: GET_PRODUCTS,\n  payload\n});\nexport const showModalAddToCart = payload => ({\n  type: SHOW_MODAL_ADD_TO_CART,\n  payload\n});\nexport const closeModalAdd = () => ({\n  type: CLOSE_MODAL_ADD\n});\nexport const showModalDelete = payload => ({\n  type: SHOW_MODAL_DELETE,\n  payload\n});\nexport const closeModalDelete = () => ({\n  type: CLOSE_MODAL_DELETE\n});\nexport const favoriteProducts = payload => ({\n  type: FAVORITE_PRODUCTS,\n  payload\n});\nexport const cartProducts = payload => ({\n  type: CART_PRODUCTS,\n  payload\n}); // MIDDLEWARE\n\nexport const getProductList = () => async dispatch => {\n  await getServerData(dispatch); // const favorite = data.filter(product => {\n  //     const items = JSON.parse(localStorage.getItem('favoriteList'))\n  //     return items.find((itemID) => itemID === product.id)\n  // })\n  // console.log(favorite);\n  // dispatch(favoriteProduct(favorite))\n};\nexport const modalConfirmAddToCart = productId => dispatch => {\n  addToCart(productId);\n  dispatch(closeModalAdd());\n};\nexport const modalConfirmDelete = productId => dispatch => {\n  removeProductCart(productId);\n  dispatch(closeModalDelete());\n};\nexport const getFavoriteList = () => async dispatch => {\n  await getServerData(dispatch);\n  const favoriteList = getProductFavorite();\n  dispatch(favoriteProducts(favoriteList));\n};\nexport const toggleFavorite = itemId => dispatch => {\n  const favorite = JSON.parse(localStorage.getItem('favoriteList')) || [];\n\n  if (favorite.indexOf(itemId) > -1) {\n    favorite.splice(favorite.indexOf(itemId), 1);\n  } else {\n    favorite.push(itemId);\n  }\n\n  localStorage.setItem('favoriteList', JSON.stringify(favorite));\n  dispatch(favoriteProducts(favorite));\n};\nexport const getCartList = () => async dispatch => {\n  await getServerData(dispatch);\n  const cartListItems = getProductWithCart();\n  console.log(cartListItems);\n  dispatch(cartProducts(cartListItems));\n};\n\nasync function getServerData(dispatch) {\n  const res = await fetch('cardProduct.json');\n  const data = await res.json();\n  dispatch(getProducts(data));\n}\n\nconst store = createStore(reducer, applyMiddleware(thunk));\nexport default store;","map":{"version":3,"sources":["/home/vadim/Documents/OLHA/DAN_IT/HomeWork/React/4_React_Redux/src/store/index.js"],"names":["createStore","applyMiddleware","thunk","addToCart","getProductWithCart","removeProductCart","getProductFavorite","GET_PRODUCTS","SHOW_MODAL_ADD_TO_CART","CLOSE_MODAL_ADD","FAVORITE_PRODUCTS","SHOW_MODAL_DELETE","CLOSE_MODAL_DELETE","CART_PRODUCTS","initialState","products","modalProductId","modalDeleteId","favoriteProducts","cartProducts","productsCounts","reducer","state","action","type","payload","filter","product","find","item","id","getProducts","showModalAddToCart","closeModalAdd","showModalDelete","closeModalDelete","getProductList","dispatch","getServerData","modalConfirmAddToCart","productId","modalConfirmDelete","getFavoriteList","favoriteList","toggleFavorite","itemId","favorite","JSON","parse","localStorage","getItem","indexOf","splice","push","setItem","stringify","getCartList","cartListItems","console","log","res","fetch","data","json","store"],"mappings":"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","sourcesContent":["import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { addToCart, getProductWithCart, removeProductCart } from '../utils/cart';\nimport { getProductFavorite } from '../utils/favorite';\n\n\n// const [list, setList] = useState(getProductFavorite());\n\n// products = products.filter(product => list.find(item => item === product.id));\n\n// const handleFavoriteList = () => setList(getProductFavorite());\n\n\n// ACTIONS\n\nconst GET_PRODUCTS = \"GET_PRODUCTS\";\nconst SHOW_MODAL_ADD_TO_CART = 'SHOW_MODAL_ADD_TO_CART';\nconst CLOSE_MODAL_ADD = 'CLOSE_MODAL_ADD';\nconst FAVORITE_PRODUCTS = 'FAVORITE_PRODUCTS';\nconst SHOW_MODAL_DELETE = 'SHOW_MODAL_DELETE';\nconst CLOSE_MODAL_DELETE = 'CLOSE_MODAL_DELETE';\nconst CART_PRODUCTS = 'CART_PRODUCTS';\n\n\n// REDUCER\n\nconst initialState = {\n    products: [],\n    modalProductId: null,\n    modalDeleteId: null,\n    favoriteProducts: [],\n    cartProducts: {},\n    productsCounts: {}\n}\n\nfunction reducer(state = initialState, action) {\n    switch (action.type) {\n        case GET_PRODUCTS:\n            return {\n                ...state,\n                products: action.payload\n            }\n        case SHOW_MODAL_ADD_TO_CART:\n            return {\n                ...state,\n                modalProductId: action.payload\n            }\n        case CLOSE_MODAL_ADD:\n            return {\n                ...state,\n                modalProductId: null\n            }\n        case SHOW_MODAL_DELETE:\n            return {\n                ...state,\n                modalProductId: action.payload\n            }\n        case CLOSE_MODAL_DELETE:\n            return {\n                ...state,\n                modalProductId: null\n            }\n        case FAVORITE_PRODUCTS:\n            return {\n                ...state,\n                favoriteProducts: state.products.filter(product => action.payload.find(item => item === product.id))\n            }\n        case CART_PRODUCTS:\n            return {\n                ...state,\n                cartProducts: state.products.filter(product => action.payload[product.id]),\n                productsCounts: action.payload\n            }\n\n        default:\n            return state\n    }\n}\n\nexport const getProducts = (payload) => ({\n    type: GET_PRODUCTS,\n    payload\n});\n\nexport const showModalAddToCart = (payload) => ({\n    type: SHOW_MODAL_ADD_TO_CART,\n    payload\n});\n\nexport const closeModalAdd = () => ({\n    type: CLOSE_MODAL_ADD\n});\n\nexport const showModalDelete = (payload) => ({\n    type: SHOW_MODAL_DELETE,\n    payload\n});\n\nexport const closeModalDelete = () => ({\n    type: CLOSE_MODAL_DELETE\n});\n\nexport const favoriteProducts = (payload) => ({\n    type: FAVORITE_PRODUCTS,\n    payload\n});\nexport const cartProducts = (payload) => ({\n    type: CART_PRODUCTS,\n    payload\n});\n\n// MIDDLEWARE\n\nexport const getProductList = () => async (dispatch) => {\n    await getServerData(dispatch)\n    // const favorite = data.filter(product => {\n    //     const items = JSON.parse(localStorage.getItem('favoriteList'))\n    //     return items.find((itemID) => itemID === product.id)\n    // })\n    // console.log(favorite);\n    // dispatch(favoriteProduct(favorite))\n}\n\nexport const modalConfirmAddToCart = (productId) => (dispatch) => {\n    addToCart(productId)\n    dispatch(closeModalAdd())\n}\n\nexport const modalConfirmDelete = (productId) => (dispatch) => {\n    removeProductCart(productId)\n    dispatch(closeModalDelete())\n}\n\nexport const getFavoriteList = () => async (dispatch) => {\n    await getServerData(dispatch)\n\n    const favoriteList = getProductFavorite();\n    dispatch(favoriteProducts(favoriteList))\n}\n\nexport const toggleFavorite = (itemId) => (dispatch) => {\n    const favorite = JSON.parse(localStorage.getItem('favoriteList')) || [];\n    if (favorite.indexOf(itemId) > -1) {\n        favorite.splice(favorite.indexOf(itemId), 1);\n    } else {\n        favorite.push(itemId);\n    }\n    localStorage.setItem('favoriteList', JSON.stringify(favorite))\n    dispatch(favoriteProducts(favorite))\n}\n\nexport const getCartList = () => async (dispatch) => {\n    await getServerData(dispatch);\n\n    const cartListItems = getProductWithCart();\n    console.log(cartListItems);\n    dispatch(cartProducts(cartListItems))\n\n}\n\nasync function getServerData(dispatch) {\n    const res = await fetch('cardProduct.json');\n    const data = await res.json();\n    dispatch(getProducts(data));\n}\n\n\nconst store = createStore(reducer, applyMiddleware(thunk));\n\nexport default store;"]},"metadata":{},"sourceType":"module"}